<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta name="keywords" content="Interface Query Incremental,Job Scheduler,Job Scheduler:Job,Job Scheduler:Queue,Job Scheduler:Schedule,Main Page,Office(xls) Format,Office(xlsx),SYSTEM,Scheduler Job Types" />
<link rel="shortcut icon" href="../../favicon.ico" />
		<title>Interface Query Incremental - Help wiki</title>
		<style type="text/css" media="screen,projection">/*<![CDATA[*/ @import "../skins/catche/main.css%3F7.css"; /*]]>*/</style>
		<link rel="stylesheet" type="text/css" media="print" href="../skins/common/commonPrint.css" />
		<!--[if lt IE 5.5000]><style type="text/css">@import "/mediawiki/skins/catche/IE50Fixes.css";</style><![endif]-->
		<!--[if IE 5.5000]><style type="text/css">@import "/mediawiki/skins/catche/IE55Fixes.css";</style><![endif]-->
		<!--[if IE 6]><style type="text/css">@import "/mediawiki/skins/catche/IE60Fixes.css";</style><![endif]-->
		<!--[if IE 7]><style type="text/css">@import "/mediawiki/skins/catche/IE70Fixes.css?1";</style><![endif]-->
		<!--[if lt IE 7]><script type="text/javascript" src="/mediawiki/skins/common/IEFixes.js"></script>
		<meta http-equiv="imagetoolbar" content="no" /><![endif]-->
		<script type="text/javascript">var skin = 'catche';var stylepath = '/mediawiki/skins';</script>
		<script type="text/javascript" src="../skins/common/wikibits.js"><!-- wikibits js --></script>
		<script type="text/javascript" src="../index.php%3Ftitle=-&amp;action=raw&amp;gen=js"><!-- site js --></script>
		<style type="text/css">/*<![CDATA[*/
@import "../index.php%3Ftitle=MediaWiki:Common.css&action=raw&ctype=text%252Fcss&smaxage=18000.css";
@import "../index.php%3Ftitle=MediaWiki:Catche.css&action=raw&ctype=text%252Fcss&smaxage=18000.css";
@import "../index.php%3Ftitle=-&action=raw&gen=css&maxage=18000.css";
/*]]>*/</style>
		<!-- Head Scripts -->
		      <style>
        <!--
        .editsection { display: none; }
        -->
      </style>
	</head>
<body  class="ns-0 ltr">
	<div id="globalWrapper">
		<div id="column-content">
	<div id="content">
		<a name="top" id="top"></a>
				<h1 class="firstHeading">Interface Query Incremental</h1>
		<div id="bodyContent">
			<h3 id="siteSub">From Help wiki</h3>
			<div id="contentSub"></div>
									<div id="jump-to-nav">Jump to: <a href="Interface_Query_Incremental.html#column-one">navigation</a>, <a href="Interface_Query_Incremental.html#searchInput">search</a></div>			<!-- start content -->
			<p><a href="Main_Page.html" title="Main Page">Main Page</a> &rarr; <a href="SYSTEM.html" title="SYSTEM">System</a> / <a href="Job_Scheduler.html" title="Job Scheduler">Scheduler</a> &rarr; <a href="./Job_Scheduler:Schedule.html" title="Job Scheduler:Schedule">Schedule</a> | <a href="./Job_Scheduler:Job.html" title="Job Scheduler:Job">Job</a> | <a href="./Job_Scheduler:Queue.html" title="Job Scheduler:Queue">Queue</a> &rarr;   <a href="Scheduler_Job_Types.html#Queries" title="Scheduler Job Types">Method</a> &rarr; <strong>Interface_Query_Incremental</strong>
</p>
<hr />
<p>This job type is used to export data from one of the source tables for all the records that have changed since this job last ran.  To do that it uses a special timestamp field called the <b>dirty_flag</b>. Each time a record is edited and saved, the <b>dirty_flag</b> is set to the current system time.  To find only these records, you can add the following condition to your query:
</p>
<pre>
dirty_flag&nbsp;!= '0000-00-00 00:00:00'
</pre>
<p>You can optionally set the dirty_flag on completion by checking on the <b>Reset Dirty Flag</b>.  This allows you to create multiple jobs for the same source table, only restting the dirty_flag in the final job.
</p><p>The interface file is saved in DMZ Subfolder you define. Once in your DMZ it can be accessed using FTP by external applications. The interface file will be named by concatenating the Source Table name with the current timestamp (YYYYMMDDHHMMSS) separated by a full stop (period) to give a unique name e.g.:
</p>
<pre>
fm_clients.20130127153201
</pre>
<table style="border-collapse: collapse; width: 100%; background: #ffd7d7; border: 1px solid silver;">

<tr>
<td width="50px" align="left"> <a href="./Image:Warning.png.html" class="image" title=""><img src="../../clients/help/wiki/images/c/cb/Warning.png" alt="" width="30" height="30" longdesc="/mediawiki/index.php/Image:Warning.png" /></a></td><td align="left"> Any existing locks on the source table will be removed together with the associated sessions to guarantee a table lock can be acquired. This will cause those users to be thrown back to the login screen therefore this scheduler job type should only be used out of office hours.
</td></tr></table>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="https://help.catch-e.net.au/mediawiki/index.php?title=Interface_Query_Incremental&amp;action=edit&amp;section=1" title="Edit section: Parameters">edit</a>]</div><a name="Parameters"></a><h2>Parameters</h2>
<p>The Scheduler <a href="./Job_Scheduler:Job.html" title="Job Scheduler:Job">Job Screen</a> screen has the following input parameters:
</p>
<table class="catch-e" style="border-collapse: collapse; width: 100%;">
<tr>
<th> Parameter </th><th> Notes
</th></tr>
<tr>
<td style="width: 12%;"> Query ID </td><td> The query_id of an existing query that will produce the output for the interface file. The query normally includes the condition <b>dirty_flag&nbsp;!= '0000-00-00 00:00:00'</b> to export only records that have changed. A search icon is provided to find the required query. <b>Query ID</b> cannot be blank.
</td></tr>
<tr>
<td> Source Table </td><td> The name of the master table i.e. the one containing the <b>dirty_flag</b> field that can be reset.  is the Sets the format for the interface file.  Can be either: <ul><li><b>fm_clients</b></li><li><b>fm_contracts</b></li><li><b>fm_drivers</b></li></ul>
</td></tr>
<tr>
<td> Attachment Format </td><td> Choose the required format for the attachment file from '<a href="Office(xlsx).html" title="Office(xlsx)">Office(xlsx)</a>', 'Office(xls)', 'Text' or 'XML'.<br /> '<a href="Office(xlsx).html" title="Office(xlsx)">Office(xlsx)</a>' is the default value and saves with an xlsx suffix. Further parameter variables are hidden if this format is chosen.<br />  <a href="Office(xls)_Format.html" title="Office(xls) Format">'Office(xls)'</a> enables you to <a href="Office(xls)_Format.html" title="Office(xls) Format">customise</a> the presentation of the generated files. Further parameter variables are hidden if this format is chosen.<br />'Text(csv)' generates a text delimited file and uses the CSV, Comma Separated Variable, format.
<p>'Text (txt)' generates a text delimited file and uses the Text (Tab Delimited) format.
'XML' generates an XML based file.
</p>
</td></tr>
<tr>
<td> Column Headings </td><td> <b>Text</b> If you turn this on, the first row of the output will contain column headings.
</td></tr>
<tr>
<td> Format Column Headings </td><td> <b>Text</b> used in conjunction with <b>Format Column</b>, if you turn this on, the column headings will be formatted by replacing underscores with spaces and words will be capitalised.
</td></tr>
<tr>
<td> Separated By </td><td>' will create a pipe separated file. In the special case where {tab} is being used for the separator, all tabs in the data will be replaced with white spaces to conform to the IANA standard for TSV files.
</td></tr>
<tr>
<td> Text Delimited By </td><td> <b>Text</b> Sets the character used to delimit columns / fields in the output if they contain special characters.  Special characters include double quotes, newlines, and this delimiter character itself.  The 'none' option will add no delimiters and is useful when the query itself adds the delimiters e.g. creating a custom interface file to specification.
</td></tr>
<tr>
<td> Omit Final Line Break </td><td> <b>Text</b> If you turn this on, there will be no line break after the last row of output.  This is required by some third party software for import purposes. This is turned off by default.
</td></tr>
<tr>
<td> Singleton Tags </td><td> <b>XML</b> If you turn this on, tags with empty values will use the singleton style format e.g. &lt;Name /&gt; as opposed to &lt;Name&gt;&lt;/Name&gt;.
</td></tr>
<tr>
<td> Indent Size </td><td> <b>XML</b> Sets the indentation (whitespaces) used, this must be an integer between 0 and 9. The default is 2.
</td></tr>
<tr>
<td> Newlines </td><td> <b>XML</b> If you turn this on, all lines will end in a newline character. This improves readability when viewing or printing the XML from non-specialized text editors.
</td></tr>
<tr>
<td> DMZ Subfolder </td><td> Is the subfolder in the DMZ area where your interface file will be created. If left blank, it will be created in the DMZ home folder. If the subfolder does not exist, it will be created. Subfolders can be nested.<br />Example&nbsp;: 'reports/out'
</td></tr>
<tr>
<td> Reset Dirty Flag </td><td> Sets the <b>dirty_flag</b> for all records in the <b>Source Table</b> to <b>'0000-00-00 00:00:00'</b> on successfully exporting the records.
</td></tr></table>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="https://help.catch-e.net.au/mediawiki/index.php?title=Interface_Query_Incremental&amp;action=edit&amp;section=2" title="Edit section: System Notes">edit</a>]</div><a name="System_Notes"></a><h4>System Notes</h4>
<p><small>
</p>
<ul><li>DEV-20142: Modify interfaceQueryIncremental process to not reset dirty flag if file move fails. Live 16/07/2018
</li><li>(DEV-21092) Set up Scheduler to send excel attachments as .xlsx. Live dd/07/2020
</li></ul>
<p></small>
</p><div class="printfooter">
Retrieved from "<a href="Interface_Query_Incremental.html">https://help.catch-e.net.au/mediawiki/index.php/Interface_Query_Incremental</a>"</div>
						<!-- end content -->
			<div class="visualClear"></div>
		</div>
	</div>
		</div>
		<div id="column-one">
	<div id="p-cactions" class="portlet">
		<h5>Views</h5>
		<ul>
		</ul>
	</div>
	<div class="portlet" id="p-personal">
		<h5>Personal tools</h5>
		<div class="pBody">
			<ul>
				<li id="pt-login"><a href="https://help.catch-e.net.au/mediawiki/index.php?title=Special:Userlogin&amp;returnto=Interface_Query_Incremental">Log in / create account</a></li>
			</ul>
		</div>
	</div>
	<div class="portlet" id="p-logo">
		<a style="background-image: url(../../clients/help/wiki/common/images/logo.gif);" href="Main_Page.html" title="Main Page"></a>
	</div>
	<script type="text/javascript"> if (window.isMSIE55) fixalpha(); </script>
	<div id="p-search" class="portlet">
		<h5><label for="searchInput">Search</label></h5>
		<div id="searchBody" class="pBody">
			<form action="./Special:Search.html" id="searchform"><div>
				<input id="searchInput" name="search" type="text" accesskey="f" value="" />
				<input type='submit' name="go" class="searchButton" id="searchGoButton"	value="Go" />&nbsp;
				<input type='submit' name="fulltext" class="searchButton" value="Search" />
			</div></form>
		</div>
	</div>
	<div class="portlet" id="p-tb">
		<h5>Toolbox</h5>
		<div class="pBody">
			<ul>
				<li id="t-whatlinkshere"><a href="./Special:Whatlinkshere/Interface_Query_Incremental.html">What links here</a></li>
				<li id="t-print"><a href="https://help.catch-e.net.au/mediawiki/index.php?title=Interface_Query_Incremental&amp;printable=yes">Printable version</a></li>			</ul>
		</div>
	</div>

		</div><!-- end of the left (by default at least) column -->
			<div class="visualClear"></div>
			<div id="footer">
				<div id="f-poweredbyico"><a href="http://www.mediawiki.org/"><img src="../skins/common/images/poweredby_mediawiki_88x31.png" alt="MediaWiki" /></a></div>
&copy; 2025 Catch-e Pty Ltd			<ul id="f-list">
				<li id="privacy"><a href="./Help_wiki:Privacy_policy.html" title="Help wiki:Privacy policy">Privacy policy</a></li>
				<li id="disclaimer"><a href="./Help_wiki:General_disclaimer.html" title="Help wiki:General disclaimer">Disclaimers</a></li>
			</ul>
		</div>
	<script type="text/javascript"> if (window.runOnloadHook) runOnloadHook();</script>
</div>
<!-- Served by 6a1f7abdc40c in 0.06 secs. -->
</body></html>
