<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta name="keywords" content="Commission,Administration,Clients:Quote defaults,CreateQuoteWebService,FLEET,Global Controls,Lessee Rate,Main Page,Quotes,Quotes:Finance,Redundancy Insurance" />
<link rel="shortcut icon" href="../../favicon.ico" />
		<title>Commission - Help wiki</title>
		<style type="text/css" media="screen,projection">/*<![CDATA[*/ @import "../skins/catche/main.css%3F7.css"; /*]]>*/</style>
		<link rel="stylesheet" type="text/css" media="print" href="../skins/common/commonPrint.css" />
		<!--[if lt IE 5.5000]><style type="text/css">@import "/mediawiki/skins/catche/IE50Fixes.css";</style><![endif]-->
		<!--[if IE 5.5000]><style type="text/css">@import "/mediawiki/skins/catche/IE55Fixes.css";</style><![endif]-->
		<!--[if IE 6]><style type="text/css">@import "/mediawiki/skins/catche/IE60Fixes.css";</style><![endif]-->
		<!--[if IE 7]><style type="text/css">@import "/mediawiki/skins/catche/IE70Fixes.css?1";</style><![endif]-->
		<!--[if lt IE 7]><script type="text/javascript" src="/mediawiki/skins/common/IEFixes.js"></script>
		<meta http-equiv="imagetoolbar" content="no" /><![endif]-->
		<script type="text/javascript">var skin = 'catche';var stylepath = '/mediawiki/skins';</script>
		<script type="text/javascript" src="../skins/common/wikibits.js"><!-- wikibits js --></script>
		<script type="text/javascript" src="../index.php%3Ftitle=-&amp;action=raw&amp;gen=js"><!-- site js --></script>
		<style type="text/css">/*<![CDATA[*/
@import "../index.php%3Ftitle=MediaWiki:Common.css&action=raw&ctype=text%252Fcss&smaxage=18000.css";
@import "../index.php%3Ftitle=MediaWiki:Catche.css&action=raw&ctype=text%252Fcss&smaxage=18000.css";
@import "../index.php%3Ftitle=-&action=raw&gen=css&maxage=18000.css";
/*]]>*/</style>
		<!-- Head Scripts -->
		      <style>
        <!--
        .editsection { display: none; }
        -->
      </style>
	</head>
<body  class="ns-0 ltr">
	<div id="globalWrapper">
		<div id="column-content">
	<div id="content">
		<a name="top" id="top"></a>
				<h1 class="firstHeading">Commission</h1>
		<div id="bodyContent">
			<h3 id="siteSub">From Help wiki</h3>
			<div id="contentSub"></div>
									<div id="jump-to-nav">Jump to: <a href="Commission.html#column-one">navigation</a>, <a href="Commission.html#searchInput">search</a></div>			<!-- start content -->
			<p><a href="Main_Page.html" title="Main Page">Main Page</a> &rarr; <a href="FLEET.html" title="FLEET">Fleet</a> / <a href="Administration.html" title="Administration">Administration</a> / <a href="Quotes.html" title="Quotes">Quotes</a> &rarr;  <a href="./Quotes:Finance.html" title="Quotes:Finance">Finance</a> &rarr; <strong>Commission</strong>
</p>
<hr />
<p><br />
</p>
<table id="toc" class="toc" summary="Contents"><tr><td><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class='toclevel-1'><a href="Commission.html#Overview"><span class="tocnumber">1</span> <span class="toctext">Overview</span></a></li>
<li class='toclevel-1'><a href="Commission.html#Order_of_rules"><span class="tocnumber">2</span> <span class="toctext">Order of rules</span></a></li>
<li class='toclevel-1'><a href="Commission.html#When_the_rules_are_triggered"><span class="tocnumber">3</span> <span class="toctext">When the rules are triggered</span></a></li>
<li class='toclevel-1'><a href="Commission.html#Set-up_Notes"><span class="tocnumber">4</span> <span class="toctext">Set-up Notes</span></a></li>
<li class='toclevel-1'><a href="Commission.html#Useful_Queries"><span class="tocnumber">5</span> <span class="toctext">Useful Queries</span></a></li>
<li class='toclevel-1'><a href="Commission.html#System_Notes"><span class="tocnumber">6</span> <span class="toctext">System Notes</span></a></li>
</ul>
</td></tr></table><script type="text/javascript"> if (window.showTocToggle) { var tocShowText = "show"; var tocHideText = "hide"; showTocToggle(); } </script>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="https://help.catch-e.net.au/mediawiki/index.php?title=Commission&amp;action=edit&amp;section=1" title="Edit section: Overview">edit</a>]</div><a name="Overview"></a><h4>Overview</h4>
<p>The system can be set-up to return calculated values for the commission rate and fee. These are triggered when <a href="./Reference_Data:qt_financier_posting_map_defaults:Detail.html" title="Reference Data:qt financier posting map defaults:Detail">Include Commission</a> flag is checked. <br />
Changing any of the following fields will trigger a recalculation of the commission rate and fee: Effective Date, Contract Type, Term (Months), Client Code or Financier. <br /> 
</p><p>Open the <a href="https://help.catch-e.net.au/clients/help/wiki/images/5/56/Commission_Model.xlsx" class='internal' title="Commission Model.xlsx">commission model</a> to see how the commission calculates using different settings.<br />
Below is a description of the order that rules are applied in to calculation the commission rate and fee of a quote:<br />
<br />
</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="https://help.catch-e.net.au/mediawiki/index.php?title=Commission&amp;action=edit&amp;section=2" title="Edit section: Order of rules">edit</a>]</div><a name="Order_of_rules"></a><h4>Order of rules</h4>
<ol><li> <a href="./Reference_Data:qt_financier_posting_map_defaults:Detail.html" title="Reference Data:qt financier posting map defaults:Detail">Setup / Reference Data → qt_financier_posting_map_defaults  →  Detail</a> "Include Commission"
<ol><li> is unchecked, the <a href="./Quotes:Finance.html" title="Quotes:Finance">Quotes / Finance</a> "Commission Rate / Fee" fields are set to <b>0.00</b> and the fields are disabled.
</li><li> is checked, continue to next step
</li></ol>
</li><li> If <a href="./Clients:Quote_defaults.html" title="Clients:Quote defaults">Clients / Quote Defaults</a> "Agreed Lessee Rate" 
<ol><li> is populated, then <a href="./Quotes:Finance.html" title="Quotes:Finance">Quotes / Finance</a> "Commission Rate / Fee" are updated to achieve the "<a href="Lessee_Rate.html" title="Lessee Rate">Agreed Lessee Rate</a>".
</li><li> is not populated, continue to next step
</li></ol>
</li><li> If <a href="./Reference_Data:qt_financier_posting_map_defaults:Detail.html" title="Reference Data:qt financier posting map defaults:Detail">Setup / Reference Data → qt_financier_posting_map_defaults  →  Detail</a> "Commission %" 
<ol><li> is populated, this will be calculated and applied to the quote (the Commission rate(%) selected will use the record where the term is equal to, or lower than the term entered in the quote)
</li><li> is not populated, continue to next step
</li></ol>
</li><li> If <a href="./Clients:Quote_defaults.html" title="Clients:Quote defaults">Clients / Quote Defaults</a> "Commission Rate" 
<ol><li> is populated, this will be calculated and applied to the quote
</li><li> is not populated, continue to next step
</li></ol>
</li><li> If <a href="Global_Controls.html#Quotes_.28QT.29" title="Global Controls">Setup / Reference Data → gb_controls</a> "novated_commission_rate" 
<ol><li> is populated, this will be calculated and applied to the quote
</li><li> is not populated, then <a href="./Quotes:Finance.html" title="Quotes:Finance">Quotes / Finance</a> "Commission Rate / Fee" will be set to <b>0.00</b>.
</li></ol>
</li><li> If <a href="./Reference_Data:qt_financier_posting_map_defaults:Detail.html" title="Reference Data:qt financier posting map defaults:Detail">Setup / Reference Data → qt_financier_posting_map_defaults  →  Detail</a> "Commission Max" and/or "Commission Max %" are populated <u>and</u> the calculated commission is lower than the stored commission in the quote
<ol><li> then the lower, calculated commission will be applied to the quote.
</li></ol>
</li></ol>
<p><br />
The value nominated in the <a href="Global_Controls.html#Quotes_.28QT.29" title="Global Controls">Setup / Reference Data → gb_controls</a> "commission_rate_basis" field is used as the base rate for this calculation (i.e. 'Depreciable Amount', 'Amount Financed' or 'On Road Price').<br />
</p><p>"Commission Max %" is calculated using the <a href="./Reference_Data:qt_financier_posting_map_defaults:Detail.html" title="Reference Data:qt financier posting map defaults:Detail">Setup / Reference Data → qt_financier_posting_map_defaults  →  Detail</a> "Commission Max Basis" setting. This basis is separate from the <a href="Global_Controls.html" title="Global Controls">Global Control "commission_rate_basis"</a> because this calculation is typically dictated by the Financier.
<br />
</p>
<table style="border-collapse: collapse; width: 100%; border: 1px solid silver;">

<tr>
<td width="50px" align="left"> <a href="./Image:Info.png.html" class="image" title=""><img src="../../clients/help/wiki/images/b/b3/Info.png" alt="" width="30" height="30" longdesc="/mediawiki/index.php/Image:Info.png" /></a></td><td align="left">When <a href="Global_Controls.html#Quote_.28QT.29" title="Global Controls">Setup / Reference Data → gb_controls</a> "redundancy_insurance_basis" is also set to 'Amount Financed', the <a href="./Quotes:Finance.html" title="Quotes:Finance">Quotes / Finance</a> "Commission Fee" is calculated after "<a href="Redundancy_Insurance.html" title="Redundancy Insurance">Redundancy Insurance</a>".
</td></tr></table>
<p><br />
</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="https://help.catch-e.net.au/mediawiki/index.php?title=Commission&amp;action=edit&amp;section=3" title="Edit section: When the rules are triggered">edit</a>]</div><a name="When_the_rules_are_triggered"></a><h4>When the rules are triggered</h4>
<p>The calculation in the <a href="https://help.catch-e.net.au/clients/help/wiki/images/5/56/Commission_Model.xlsx" class='internal' title="Commission Model.xlsx">commission model</a> and the rules above are triggered in a quote in the following scenarios;
</p>
<ol><li> When a quote is created by a user in the system or by running the <a href="CreateQuoteWebService.html" title="CreateQuoteWebService">CreateQuotes</a> api.
</li><li> When the "Effective Date" or the "Client Code" is changed 
</li><li> When the "Type Code", "Term (Months)" or "Financier" is changed AND <a href="./Reference_Data:qt_financier_posting_map_defaults.html" title="Reference Data:qt financier posting map defaults">Setup / Reference Data → qt_financier_posting_map_defaults</a> "Novated Commission %" is populated.
</li><li> When the "Type Code", "Term (Months)" or "Financier" is changed AND <a href="./Reference_Data:qt_financier_posting_map_defaults.html" title="Reference Data:qt financier posting map defaults">Setup / Reference Data → qt_financier_posting_map_defaults</a> "Novated Commission Max" is populated and existing "Commission Rate" is higher than the "Novated Commission Max".
</li><li> When any field that triggers a recalculation of the finance rate is changed AND <a href="./Reference_Data:qt_financier_posting_map_defaults.html" title="Reference Data:qt financier posting map defaults">Setup / Reference Data → qt_financier_posting_map_defaults</a> "Novated Commission %" is populated.
</li><li> When any field that triggers a recalculation of the finance rate is changed AND <a href="./Reference_Data:qt_financier_posting_map_defaults.html" title="Reference Data:qt financier posting map defaults">Setup / Reference Data → qt_financier_posting_map_defaults</a> "Novated Commission Max" and/or "Novated Commission Max %" is populated and existing "Commission Rate" is higher than the "Novated Commission Max" and/or "Novated Commission Max %".
</li></ol>
<p><br />
The calculation rules below are <u>not</u> triggered in a quote in the following scenarios;
</p>
<ol><li> When the "Type Code", "Term (Months)" or "Financier" is changed AND <a href="./Reference_Data:qt_financier_posting_map_defaults.html" title="Reference Data:qt financier posting map defaults">Setup / Reference Data → qt_financier_posting_map_defaults</a> has not been populated.
</li><li> When the "Type Code", "Term (Months)" or "Financier" is changed AND a <a href="./Reference_Data:qt_financier_posting_map_defaults.html" title="Reference Data:qt financier posting map defaults">Setup / Reference Data → qt_financier_posting_map_defaults</a> record exists but "Novated Commission %" is not populated and "Novated Commission Max" and/or "Novated Commission Max %" is not populated or is higher than the stored commission.
</li><li> When any field that triggers a recalculation of the finance rate is changed AND <a href="./Reference_Data:qt_financier_posting_map_defaults.html" title="Reference Data:qt financier posting map defaults">Setup / Reference Data → qt_financier_posting_map_defaults</a> has not been populated.
</li><li> When any field that triggers a recalculation of the finance rate is changed AND a <a href="./Reference_Data:qt_financier_posting_map_defaults.html" title="Reference Data:qt financier posting map defaults">Setup / Reference Data → qt_financier_posting_map_defaults</a> record exists but "Novated Commission %"  is not populated and "Novated Commission Max" and/or "Novated Commission Max %" is not populated or is higher than the stored commission.
</li></ol>
<p><br />
</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="https://help.catch-e.net.au/mediawiki/index.php?title=Commission&amp;action=edit&amp;section=4" title="Edit section: Set-up Notes">edit</a>]</div><a name="Set-up_Notes"></a><h4>Set-up Notes</h4>
<p>The Quotes / Finance "Commission Rate/Fee" field will be set as 'display-only' if the client has a stored "<a href="Lessee_Rate.html" title="Lessee Rate">Agreed Lessee Rate</a>", as this will change the commission rate and fee as they are forced to change in the calculation so that the "Agreed Lessee Rate" is matched.<br /> 
Visit <a href="./Role_Restrictions:Quotes:Finance.html" title="Role Restrictions:Quotes:Finance">Role Restrictions &rarr; Quotes / Finance</a> to check the set-up details.
<br /><br />
</p>
<hr />
<div class="editsection" style="float:right;margin-left:5px;">[<a href="https://help.catch-e.net.au/mediawiki/index.php?title=Commission&amp;action=edit&amp;section=5" title="Edit section: Useful Queries">edit</a>]</div><a name="Useful_Queries"></a><h4>Useful Queries</h4>
<pre>
-- Returns fields required for Commission Model:
SET time_zone = 'Australia/Melbourne';
SET @quote_id&nbsp;:= 100000;
SET @term&nbsp;:= '24';

SELECT 
-- Fields required for calculating Commission
  gbc2.value AS 'GBC_commission_rate_basis' -- , gbc2.effective_from
, q.financed_amount AS 'Amount Financed'
, q.on_road_price_net + q.on_road_price_gst AS 'On Road Price'
, q.depreciable_amount
-- These fields used for &quot;Calculation Validations&quot; section below
, q.lessee_rate * 100 AS 'lessee_rate'
, q.commission_rate * 100 AS 'commission_rate'
, q.commission AS 'commission_fee'
-- Order of Rules #1
, IFNULL(pmd.include_commission_flag, 'Yes') AS '1) include_commission_flag'
-- , 'If no, Commission = $0, if yes, next rule' AS rule_1_result
-- Order of Rules #2
, c.agreed_lessee_rate AS '2) Agreed Lessee Rate'
-- , 'If &gt; 0, Commission locked and floated to ensure Lessee Rate matched, else next rule' AS rule_2_result
-- Order of Rules #3
, pmd.novated_commission_rate AS '3) PMD_novated_commission_rate'
-- , 'If &gt; 0 Calc Commission using this rate, else next rule' AS rule_3_result
-- Order of Rules #4
, cd.novated_commission_rate AS '4) CLI_def_novated_commission_rate'
-- , 'If &gt; 0 Calc Commission using this rate, else next rule' AS rule_4_result
-- Order of Rules #5
, gbc1.value AS '5) GBC_novated_commission_rate' -- , gbc1.effective_from
-- , 'Calc Commission using this rate, even if zero' AS rule_5_result
-- Order of Rules #6
, pmd.novated_commission_maximum_amount
, pmd.novated_commission_maximum_rate
, pmd.novated_commission_maximum_basis
-- , 'All above Rules validated against these maximums' AS rule_6_result

FROM qt_quotes q
INNER JOIN fm_clients c ON c.client_id = q.client_id
LEFT JOIN qt_client_defaults cd ON cd.client_id = c.client_id
LEFT JOIN 
	(SELECT * FROM qt_financier_posting_map_defaults 
	WHERE supplier_id = (SELECT supplier_id FROM fm_suppliers WHERE supplier_code = 'MATTFIN')
	AND posting_map_id = (SELECT posting_map_id FROM gl_posting_maps WHERE posting_map_code = 'NOFB')
	AND term &lt;= 24
	ORDER BY term DESC LIMIT 1) pmd ON pmd.supplier_id = q.supplier_id_financier
JOIN (SELECT value, effective_from FROM gb_controls WHERE name = 'novated_commission_rate' ORDER BY name, effective_from DESC LIMIT 1) gbc1
JOIN (SELECT value, effective_from FROM gb_controls WHERE name = 'commission_rate_basis' ORDER BY name, effective_from DESC LIMIT 1) gbc2
WHERE q.quote_id = @quote_id
GROUP BY q.quote_id;
</pre>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="https://help.catch-e.net.au/mediawiki/index.php?title=Commission&amp;action=edit&amp;section=6" title="Edit section: System Notes">edit</a>]</div><a name="System_Notes"></a><h4>System Notes</h4>
<p><small>
</p>
<ul><li> (DEV-20731) Add Commission rate and cap based on Supplier/Contract Type/Term. Live 21/10/2019
</li><li> (DEV-21407) Novated Commission Max %. Live 16/09/2021
</li><li> (DEV-21525) Include Commission flag in qt_financier_posting_map_defaults. Live 11/04/2022
</li><li> (DEV-21643) Allow edit include_commision_flag for all Contract Type Groups. Live 28/07/2025
</li><li> (API-20712) PatchQuote API change - Commission Rate &amp; Fee. Live dd/mm/2025
</li></ul>
<p></small>
</p><div class="printfooter">
Retrieved from "<a href="Commission.html">https://help.catch-e.net.au/mediawiki/index.php/Commission</a>"</div>
						<!-- end content -->
			<div class="visualClear"></div>
		</div>
	</div>
		</div>
		<div id="column-one">
	<div id="p-cactions" class="portlet">
		<h5>Views</h5>
		<ul>
		</ul>
	</div>
	<div class="portlet" id="p-personal">
		<h5>Personal tools</h5>
		<div class="pBody">
			<ul>
				<li id="pt-login"><a href="https://help.catch-e.net.au/mediawiki/index.php?title=Special:Userlogin&amp;returnto=Commission">Log in / create account</a></li>
			</ul>
		</div>
	</div>
	<div class="portlet" id="p-logo">
		<a style="background-image: url(../../clients/help/wiki/common/images/logo.gif);" href="Main_Page.html" title="Main Page"></a>
	</div>
	<script type="text/javascript"> if (window.isMSIE55) fixalpha(); </script>
	<div id="p-search" class="portlet">
		<h5><label for="searchInput">Search</label></h5>
		<div id="searchBody" class="pBody">
			<form action="./Special:Search.html" id="searchform"><div>
				<input id="searchInput" name="search" type="text" accesskey="f" value="" />
				<input type='submit' name="go" class="searchButton" id="searchGoButton"	value="Go" />&nbsp;
				<input type='submit' name="fulltext" class="searchButton" value="Search" />
			</div></form>
		</div>
	</div>
	<div class="portlet" id="p-tb">
		<h5>Toolbox</h5>
		<div class="pBody">
			<ul>
				<li id="t-whatlinkshere"><a href="./Special:Whatlinkshere/Commission.html">What links here</a></li>
				<li id="t-print"><a href="https://help.catch-e.net.au/mediawiki/index.php?title=Commission&amp;printable=yes">Printable version</a></li>			</ul>
		</div>
	</div>

		</div><!-- end of the left (by default at least) column -->
			<div class="visualClear"></div>
			<div id="footer">
				<div id="f-poweredbyico"><a href="http://www.mediawiki.org/"><img src="../skins/common/images/poweredby_mediawiki_88x31.png" alt="MediaWiki" /></a></div>
&copy; 2025 Catch-e Pty Ltd			<ul id="f-list">
				<li id="privacy"><a href="./Help_wiki:Privacy_policy.html" title="Help wiki:Privacy policy">Privacy policy</a></li>
				<li id="disclaimer"><a href="./Help_wiki:General_disclaimer.html" title="Help wiki:General disclaimer">Disclaimers</a></li>
			</ul>
		</div>
	<script type="text/javascript"> if (window.runOnloadHook) runOnloadHook();</script>
</div>
<!-- Served by 6a1f7abdc40c in 0.09 secs. -->
</body></html>
