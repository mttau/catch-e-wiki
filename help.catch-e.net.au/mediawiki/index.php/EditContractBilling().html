<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta name="keywords" content="Edit budgets for a contract that has not yet billed,APIs,Contracts,Contracts:Billing,EditContractBilling(),FLEET BILLING,Field Auditing,Main Page,Start Periodic,System Configuration" />
<link rel="shortcut icon" href="../../favicon.ico" />
		<title>Edit budgets for a contract that has not yet billed - Help wiki</title>
		<style type="text/css" media="screen,projection">/*<![CDATA[*/ @import "../skins/catche/main.css%3F7.css"; /*]]>*/</style>
		<link rel="stylesheet" type="text/css" media="print" href="../skins/common/commonPrint.css" />
		<!--[if lt IE 5.5000]><style type="text/css">@import "/mediawiki/skins/catche/IE50Fixes.css";</style><![endif]-->
		<!--[if IE 5.5000]><style type="text/css">@import "/mediawiki/skins/catche/IE55Fixes.css";</style><![endif]-->
		<!--[if IE 6]><style type="text/css">@import "/mediawiki/skins/catche/IE60Fixes.css";</style><![endif]-->
		<!--[if IE 7]><style type="text/css">@import "/mediawiki/skins/catche/IE70Fixes.css?1";</style><![endif]-->
		<!--[if lt IE 7]><script type="text/javascript" src="/mediawiki/skins/common/IEFixes.js"></script>
		<meta http-equiv="imagetoolbar" content="no" /><![endif]-->
		<script type="text/javascript">var skin = 'catche';var stylepath = '/mediawiki/skins';</script>
		<script type="text/javascript" src="../skins/common/wikibits.js"><!-- wikibits js --></script>
		<script type="text/javascript" src="../index.php%3Ftitle=-&amp;action=raw&amp;gen=js"><!-- site js --></script>
		<style type="text/css">/*<![CDATA[*/
@import "../index.php%3Ftitle=MediaWiki:Common.css&action=raw&ctype=text%252Fcss&smaxage=18000.css";
@import "../index.php%3Ftitle=MediaWiki:Catche.css&action=raw&ctype=text%252Fcss&smaxage=18000.css";
@import "../index.php%3Ftitle=-&action=raw&gen=css&maxage=18000.css";
/*]]>*/</style>
		<!-- Head Scripts -->
		      <style>
        <!--
        .editsection { display: none; }
        -->
      </style>
	</head>
<body  class="ns-0 ltr">
	<div id="globalWrapper">
		<div id="column-content">
	<div id="content">
		<a name="top" id="top"></a>
				<h1 class="firstHeading">Edit budgets for a contract that has not yet billed</h1>
		<div id="bodyContent">
			<h3 id="siteSub">From Help wiki</h3>
			<div id="contentSub">(Redirected from <a href="https://help.catch-e.net.au/mediawiki/index.php?title=EditContractBilling%28%29&amp;redirect=no" title="EditContractBilling()">EditContractBilling()</a>)</div>
									<div id="jump-to-nav">Jump to: <a href="EditContractBilling().html#column-one">navigation</a>, <a href="EditContractBilling().html#searchInput">search</a></div>			<!-- start content -->
			<p><a href="Main_Page.html" title="Main Page">Main Page</a> &rarr; <a href="System_Configuration.html#APIs" title="System Configuration">IT Set-up</a> &rarr; <a href="APIs.html" title="APIs">APIs</a> â†’ <a href="APIs.html#Contract_.2F_Billing" title="APIs">Contract / Billing</a> &rarr; <strong>Edit budgets for a contract that has not yet billed</strong>
</p>
<hr />
<table id="toc" class="toc" summary="Contents"><tr><td><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class='toclevel-1'><a href="EditContractBilling().html#Overview"><span class="tocnumber">1</span> <span class="toctext">Overview</span></a></li>
<li class='toclevel-1'><a href="EditContractBilling().html#HTTP_Method"><span class="tocnumber">2</span> <span class="toctext">HTTP Method</span></a></li>
<li class='toclevel-1'><a href="EditContractBilling().html#Input_Fields"><span class="tocnumber">3</span> <span class="toctext">Input Fields</span></a>
<ul>
<li class='toclevel-2'><a href="EditContractBilling().html#Input_Fields_.28Header.29"><span class="tocnumber">3.1</span> <span class="toctext">Input Fields (Header)</span></a></li>
<li class='toclevel-2'><a href="EditContractBilling().html#Input_Fields_.28Body.29"><span class="tocnumber">3.2</span> <span class="toctext">Input Fields (Body)</span></a></li>
<li class='toclevel-2'><a href="EditContractBilling().html#JSON_Example"><span class="tocnumber">3.3</span> <span class="toctext">JSON Example</span></a></li>
</ul>
</li>
<li class='toclevel-1'><a href="EditContractBilling().html#Output_Example_.28Successful.29"><span class="tocnumber">4</span> <span class="toctext">Output Example (Successful)</span></a></li>
<li class='toclevel-1'><a href="EditContractBilling().html#Error_Codes"><span class="tocnumber">5</span> <span class="toctext">Error Codes</span></a>
<ul>
<li class='toclevel-2'><a href="EditContractBilling().html#Example_error_output"><span class="tocnumber">5.1</span> <span class="toctext">Example error output</span></a></li>
<li class='toclevel-2'><a href="EditContractBilling().html#Example_Bad_inputs"><span class="tocnumber">5.2</span> <span class="toctext">Example Bad inputs</span></a></li>
</ul>
</li>
<li class='toclevel-1'><a href="EditContractBilling().html#System_Notes"><span class="tocnumber">6</span> <span class="toctext">System Notes</span></a></li>
</ul>
</td></tr></table><script type="text/javascript"> if (window.showTocToggle) { var tocShowText = "show"; var tocHideText = "hide"; showTocToggle(); } </script>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="https://help.catch-e.net.au/mediawiki/index.php?title=Edit_budgets_for_a_contract_that_has_not_yet_billed&amp;action=edit&amp;section=1" title="Edit section: Overview">edit</a>]</div><a name="Overview"></a><h2>Overview</h2>
<p><span style="color:#A72125"><i><b>Beta function</b></i></span>
</p><p>Allows you to Edit Billing details for a Contract that has not yet billed.
<br />
</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="https://help.catch-e.net.au/mediawiki/index.php?title=Edit_budgets_for_a_contract_that_has_not_yet_billed&amp;action=edit&amp;section=2" title="Edit section: HTTP Method">edit</a>]</div><a name="HTTP_Method"></a><h2> HTTP Method </h2>
<p>Use the HTTP Method 'POST' for consuming this web service. <br />
</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="https://help.catch-e.net.au/mediawiki/index.php?title=Edit_budgets_for_a_contract_that_has_not_yet_billed&amp;action=edit&amp;section=3" title="Edit section: Input Fields">edit</a>]</div><a name="Input_Fields"></a><h2>Input Fields</h2>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="https://help.catch-e.net.au/mediawiki/index.php?title=Edit_budgets_for_a_contract_that_has_not_yet_billed&amp;action=edit&amp;section=4" title="Edit section: Input Fields (Header)">edit</a>]</div><a name="Input_Fields_.28Header.29"></a><h3>Input Fields (Header) </h3>
<ul><li> Header should contain the 'Content-Type' Key with the Value = 'application/json' or 'application/hjson'. <br />
</li><li> If an Authenticated API user has the <i>Audit:UserIdOverride</i> permission, an optional Key 'Audit-User-Id' can be passed that will create the associated <a href="Field_Auditing.html" title="Field Auditing">Audit Records</a> with the user_id passed in.
</li></ul>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="https://help.catch-e.net.au/mediawiki/index.php?title=Edit_budgets_for_a_contract_that_has_not_yet_billed&amp;action=edit&amp;section=5" title="Edit section: Input Fields (Body)">edit</a>]</div><a name="Input_Fields_.28Body.29"></a><h3>Input Fields (Body)</h3>
<table class="catch-e" style="border-collapse: collapse; width: 100%;">
<tr>
<th>JSON Field</th><th>Format</th><th>Notes</th><th>Mandatory
</th></tr>
<tr>
<td>contract_id</td><td>Int</td><td>"Contract ID"</td><td>Yes
</td></tr>
<tr>
<td>term</td><td>number</td><td>Update the "Term" value in months by adding this variable. If passed in conjunction with the "Contract Start", the api creates or updates budget records relative to the updated term. If passed after the "Contract Start" has been recorded, budget records are added or removed accordingly.</td><td>No
</td></tr>
<tr>
<td>contract_start</td><td>date</td><td>Add in the "Contract Start" date. Adding in this value calculates and populates the "Contract End" date. If the contract is a 'monthly' pay cycle, the "Start Periodic" date and budget records will be created based on existing defaults.</td><td>No
</td></tr>
<tr>
<td>contract_end</td><td>date</td><td>The "Contract End" date updates automatically when <i>contract_start</i> is passed, but you can add this variable to store a date that differs from the calculated date. This value is not used for creating budget records. It is a reporting only field. </td><td>No
</td></tr>
<tr>
<td> start_periodic </td><td> date </td><td> Add a value here to update the "Start Periodic" date.<br /> If this field is not passed and <i>contract_start</i> is passed in this call, <a href="Start_Periodic.html" title="Start Periodic"><i>start_periodic</i></a> will be calculated and updated in this call (if all of the required conditions for calculation are met).<br /> If this variable is passed before a "Contract Start" date has been added for , an error validation will be given and the record will not be updated. Go to the <a href="EditContractBilling().html#Error_Codes" title="EditContractBilling()">Error Codes</a> section for full details.</td><td>No
</td></tr>
<tr>
<td>inertia_flag</td><td>string</td><td>Add yes or no to update the "Inertia" field.</td><td>No
</td></tr>
<tr>
<td>billing_common_day</td><td>Int</td><td>Add a value here to update the "Common Day". If this is not passed, the stored client value will used by default. It is only applicable to contracts with a monthly pay cycle. If passed before a date is added for "Contract Start" this variable will be ignored as it is used to create or update budget records (which also require a "Contract Start" to be created). If the field variable is passed in isolation and the billing period is not monthly, a validation will be given. Go to the <a href="EditContractBilling().html#Error_Codes" title="EditContractBilling()">Error Codes</a> section for full details.</td><td>No
</td></tr>
<tr>
<td>billing_interval</td><td>string</td><td>Add a value here to update the "Periodic Interval" of the contract. Changing the interval will recalculate the budget records to match. Valid entries can be found using the following query;
<pre>
SELECT pay_cycle_code FROM gb_pay_cycles WHERE billing_flag = 'yes'
</pre>
</td><td>No
</td></tr>
<tr>
<td>initial_billings</td><td>string</td><td>The number of periods included in the Initial Charge. If passed, this will be ignored if the "Billing Interval" is not 'Monthly'. If the field variable is passed in isolation and the billing period is not monthly, a validation will be given.  Go to the <a href="EditContractBilling().html#Error_Codes" title="EditContractBilling()">Error Codes</a> section for full details.</td><td>No
</td></tr>
<tr>
<td>periodic_billings</td><td>string</td><td>The number of regular billings to be processed as periodic invoices</td><td>No
</td></tr>
<tr>
<td>payment_method</td><td>string</td><td>Select the preferred "Payment Method". Choose from direct-debit, cheque, cash, other, credit-card, eft. This will populate into each pending budget record.</td><td>No
</td></tr>
<tr>
<td>override_warnings_flag</td><td>string</td><td>Override warning validation. If not specified, defaults to 'no'</td><td>No
</td></tr></table>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="https://help.catch-e.net.au/mediawiki/index.php?title=Edit_budgets_for_a_contract_that_has_not_yet_billed&amp;action=edit&amp;section=6" title="Edit section: JSON Example">edit</a>]</div><a name="JSON_Example"></a><h3>JSON Example</h3>
<pre>
https://api.catch-e.com/beta/fm/contract/billing/edit

{
    &quot;contract_id&quot;: 100000,
    &quot;inertia_flag&quot;: &quot;no&quot;,
    &quot;billing_interval&quot;: &quot;monthly&quot;,
    &quot;initial_billings&quot;: 0,
    &quot;periodic_billings&quot;: 60,
    &quot;payment_method&quot;: &quot;direct-debit&quot;
}
</pre>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="https://help.catch-e.net.au/mediawiki/index.php?title=Edit_budgets_for_a_contract_that_has_not_yet_billed&amp;action=edit&amp;section=7" title="Edit section: Output Example (Successful)">edit</a>]</div><a name="Output_Example_.28Successful.29"></a><h2>Output Example (Successful)</h2>
<pre>
{
    &quot;result&quot;: &quot;OK&quot;
}
</pre>
<p><br />
</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="https://help.catch-e.net.au/mediawiki/index.php?title=Edit_budgets_for_a_contract_that_has_not_yet_billed&amp;action=edit&amp;section=8" title="Edit section: Error Codes">edit</a>]</div><a name="Error_Codes"></a><h2>Error Codes</h2>
<table class="catch-e" style="border-collapse: collapse; width: 100%;">
<tr>
<th>  Detail </th><th> Validation Messages </th><th>  Comments
</th></tr>
<tr>
<td class="catch-e_th_sub" colspan="3"> 422 - Unprocessable Entity
</td></tr>
<tr>
<td>  "detail": "Failed Validation" </td><td> {"billing_interval": {"noRecordFound": "No record matching the input was found"}} </td><td>  The <i>billing_interval</i> record passed either does not exist or is not flagged 'yes' for billing. This error does not happen in the Contracts / Billing tab as the record is presented in a list box, only valid records are shown and if the stored record is invalid it is silently removed on Edit.
</td></tr>
<tr>
<td>  "detail": "Failed Validation" </td><td> {"contract_id": {"noRecordFound": "No record matching the input was found"}} </td><td>  The <i>contract_id</i> passed is not stored in the database. E.g. '1'
</td></tr>
<tr>
<td>  "detail": "Failed Validation" </td><td> {"contract_start": <br />   {"inputRequired": "Value is required"}} </td><td>  You cannot pass a <i>start_periodic</i> if <i>contract_start</i> is blank.<br /> This is the same as the Contracts / Billing tab alert "Contract Start is required". Visit the <a href="./Contracts:Billing.html#Validations_and_Alerts_on_Save" title="Contracts:Billing">Validations and Alerts on Save</a> section for more.
</td></tr>
<tr>
<td>  "detail": "Failed Validation" </td><td> "start_periodic": {<br />"invalidStartPeriodicDate": "Start Periodic Date cannot be earlier than Contract Start Date"<br />} </td><td>  You cannot pass a <i>start_periodic</i> that is earlier than the <i>contract_start</i> is blank.
</td></tr>
<tr>
<td>  "detail": "Unrecognized fields: inital_billings" </td><td> </td><td>  <i>initial_billings</i> has been passed for a contract that does not have a 'monthly' pay cycle.
</td></tr>
<tr>
<td>  "detail": "Failed Validation" </td><td>{ "initial_billings": { "valueNotSupported": "Initial billings can only be specified with a billing interval of monthly"}</td><td> This validation is triggered if the initial_billing field is passed in isolation for the contracts which do not have billing interval of monthly. If this field is passed with other fields then the validation is ignored silently.
</td></tr>
<tr>
<td>  "detail": "Failed Validation" </td><td>{ "billing_common_day": {"valueNotSupported": "Billing common day can only be specified with a billing interval of monthly"}</td><td>This validation is triggered if the billing_common_day field is passed in isolation for the contracts which do not have billing interval of monthly. If this field is passed with other fields then the validation is ignored silently.
</td></tr>
<tr>
<td class="catch-e_th_sub" colspan="4"> 423 - Locked
</td></tr>
<tr>
<td>  "detail": "Locked" </td><td> </td><td> Either the <a href="Contracts.html" title="Contracts">Contract</a> is being edited or <a href="FLEET_BILLING.html" title="FLEET BILLING">Billing</a> is being processed. Try again once the Contract is no longer in use or the Billing process has completed.
</td></tr>
<tr>
<td class="catch-e_th_sub" colspan="3"> 403 - Forbidden
</td></tr>
<tr>
<td>  "detail": "Forbidden" </td><td> </td><td> You do not have permissions for this request.
</td></tr></table>
<p><br />
</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="https://help.catch-e.net.au/mediawiki/index.php?title=Edit_budgets_for_a_contract_that_has_not_yet_billed&amp;action=edit&amp;section=9" title="Edit section: Example error output">edit</a>]</div><a name="Example_error_output"></a><h3>Example error output</h3>
<pre>
{
  &quot;warning_messages&quot;: {
    &quot;fieldName&quot;: {
      &quot;warningException&quot;: &quot;A textual description of the warning exception.&quot;
    }
  },
  &quot;validation_messages&quot;: {
    &quot;fieldName&quot;: {
      &quot;validationException&quot;: &quot;A textual description of the validation exception.&quot;
    }
  },
  &quot;type&quot;: &quot;http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html&quot;,
  &quot;title&quot;: &quot;Unprocessable Entity&quot;,
  &quot;status&quot;: 422,
  &quot;detail&quot;: &quot;Failed Validation&quot;
}
</pre>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="https://help.catch-e.net.au/mediawiki/index.php?title=Edit_budgets_for_a_contract_that_has_not_yet_billed&amp;action=edit&amp;section=10" title="Edit section: Example Bad inputs">edit</a>]</div><a name="Example_Bad_inputs"></a><h3>Example Bad inputs</h3>
<table class="catch-e" style="border-collapse: collapse; width: 100%;">
<tr>
<th>Field Name</th><th>Example bad input</th><th>Exception</th><th>
</th></tr>
<tr>
<td>contract_id</td><td> 1 </td><td>"noRecordFound": "No record matching the input was found"
</td></tr>
<tr>
<td>inertia_flag</td><td> not </td><td>"notInArray": "Value must be either 'yes' or 'no'"
</td></tr>
<tr>
<td>billing_interval</td><td> monthlyx </td><td>"noRecordFound": "No record matching the input was found"
</td></tr>
<tr>
<td>initial_billings</td><td> 99 </td><td>"notLessThan": "The input is not less than '10'",<br />
<p>"initialBillingsInvalid": "Initial billings can only be specified with a billing interval of monthly"<br />
"invalidInitialBillings": "Initial billings cannot be greater than 0 when Start Periodic date has not been defined"
</p>
</td></tr>
<tr>
<td>periodic_billings</td><td> 10000 </td><td> "notLessThan": "The input is not less than '1000'"
</td></tr>
<tr>
<td>payment_method</td><td> directxdebit </td><td>"notInArray": "Invalid payment method"
</td></tr></table>
<p><br />
</p>
<hr />
<div class="editsection" style="float:right;margin-left:5px;">[<a href="https://help.catch-e.net.au/mediawiki/index.php?title=Edit_budgets_for_a_contract_that_has_not_yet_billed&amp;action=edit&amp;section=11" title="Edit section: System Notes">edit</a>]</div><a name="System_Notes"></a><h2>System Notes</h2>
<p><small>
</p>
<ul><li> (API-20008) Create new Web Service to allow data to be pushed into fm_contract_budgets. Live 26/03/2019
</li><li> (API-20018) Modify editContractBilling API to include additional fields. Live 07/05/2019
</li><li> (API-20024) Fix bugs from (API-20018) Modify editContractBilling API to include additional fields. Live 23/09/2019
</li><li> (API-20075) Apply contract locks to Contract Budget APIs. Live 11/08/2020
</li><li> (API-20077) Next Pay Cycle Date (post Laminas). Live 14/12/2020
</li><li> (API-20278) Enhance API to support HJSON. Live 22/08/2022
</li><li> (API-20324) Contracts /  Billing 'Common Day' - enable '29th','30th' or '31st' to be chosen. Live 07/11/2022
</li><li> (API-20355) CatchEDateCalc::dateFromString(): Argument #1 ($date) must be of type string, null given, called in /var/app/current/module/catch-e-api/ContractApi/src/Resource/V1/ContractBillingEditResource.php on line 183. Live 12/12/2022
</li></ul>
<p></small>
</p>
<!-- Saved in parser cache with key help_catch_e_net_au:pcache:idhash:2692-0!1!0!0!!en!2 and timestamp 20251120231315 -->
<div class="printfooter">
Retrieved from "<a href="Edit_budgets_for_a_contract_that_has_not_yet_billed.html">https://help.catch-e.net.au/mediawiki/index.php/Edit_budgets_for_a_contract_that_has_not_yet_billed</a>"</div>
						<!-- end content -->
			<div class="visualClear"></div>
		</div>
	</div>
		</div>
		<div id="column-one">
	<div id="p-cactions" class="portlet">
		<h5>Views</h5>
		<ul>
		</ul>
	</div>
	<div class="portlet" id="p-personal">
		<h5>Personal tools</h5>
		<div class="pBody">
			<ul>
				<li id="pt-login"><a href="https://help.catch-e.net.au/mediawiki/index.php?title=Special:Userlogin&amp;returnto=Edit_budgets_for_a_contract_that_has_not_yet_billed">Log in / create account</a></li>
			</ul>
		</div>
	</div>
	<div class="portlet" id="p-logo">
		<a style="background-image: url(../../clients/help/wiki/common/images/logo.gif);" href="Main_Page.html" title="Main Page"></a>
	</div>
	<script type="text/javascript"> if (window.isMSIE55) fixalpha(); </script>
	<div id="p-search" class="portlet">
		<h5><label for="searchInput">Search</label></h5>
		<div id="searchBody" class="pBody">
			<form action="./Special:Search.html" id="searchform"><div>
				<input id="searchInput" name="search" type="text" accesskey="f" value="" />
				<input type='submit' name="go" class="searchButton" id="searchGoButton"	value="Go" />&nbsp;
				<input type='submit' name="fulltext" class="searchButton" value="Search" />
			</div></form>
		</div>
	</div>
	<div class="portlet" id="p-tb">
		<h5>Toolbox</h5>
		<div class="pBody">
			<ul>
				<li id="t-whatlinkshere"><a href="./Special:Whatlinkshere/Edit_budgets_for_a_contract_that_has_not_yet_billed.html">What links here</a></li>
				<li id="t-print"><a href="https://help.catch-e.net.au/mediawiki/index.php?title=Edit_budgets_for_a_contract_that_has_not_yet_billed&amp;printable=yes">Printable version</a></li>			</ul>
		</div>
	</div>

		</div><!-- end of the left (by default at least) column -->
			<div class="visualClear"></div>
			<div id="footer">
				<div id="f-poweredbyico"><a href="http://www.mediawiki.org/"><img src="../skins/common/images/poweredby_mediawiki_88x31.png" alt="MediaWiki" /></a></div>
&copy; 2025 Catch-e Pty Ltd			<ul id="f-list">
				<li id="privacy"><a href="./Help_wiki:Privacy_policy.html" title="Help wiki:Privacy policy">Privacy policy</a></li>
				<li id="disclaimer"><a href="./Help_wiki:General_disclaimer.html" title="Help wiki:General disclaimer">Disclaimers</a></li>
			</ul>
		</div>
	<script type="text/javascript"> if (window.runOnloadHook) runOnloadHook();</script>
</div>
<!-- Served by 2c88f4f4aa65 in 0.03 secs. -->
</body></html>
